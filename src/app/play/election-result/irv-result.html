
<span class="small">
    @for (step of results().steps; track $index) {
        <p>
            @let roundNum = $index + 1;
            <b>@switch (lang) {
                @case ("en-CA") {
                    round {{roundNum}}:
                }
                @case ("fr-FR") {
                    tour n°{{roundNum}}&nbsp;:
                }
                @default {
                    <b [style.color]="'red'">TRANSLATION FOR {{lang}} MISSING</b>
                }
            }</b><br/>
            @switch (lang) {
                @case ("en-CA") {
                    who's voters' #1 choice?
                }
                @case ("fr-FR") {
                    quels sont les premiers choix des électeurs&nbsp;?
                }
                @default {
                    <b [style.color]="'red'">TRANSLATION FOR {{lang}} MISSING</b>
                }
            }<br/>

            @for (candidate of candidates(); track candidate.shape) {
                @if (step.firstChoicesForRemainingCandidates.has(candidate)) {
                    <img [src]="candidatesDisplayService.getIconImage(candidate)" />:{{step.firstChoicesForRemainingCandidates.get(candidate)}}@if ($index < candidates().length-1) {,&ngsp;}
                }
            }
            <br/>

            @if ($index === results().steps.length-1) {
                @switch (lang) {
                    @case ("en-CA") {
                        <img [src]="candidatesDisplayService.getIconImage(step.selectedCandidate)" /> has more than 50%
                    }
                    @case ("fr-FR") {
                        <img [src]="candidatesDisplayService.getIconImage(step.selectedCandidate)" /> a plus de 50% des voix
                    }
                    @default {
                        <b [style.color]="'red'">TRANSLATION FOR {{lang}} MISSING</b>
                    }
                }
            } @else {
                @switch (lang) {
                    @case ("en-CA") {
                        nobody's more than 50%.
                        eliminate loser, <img [src]="candidatesDisplayService.getIconImage(step.selectedCandidate)" />.
                        next round!
                    }
                    @case ("fr-FR") {
                        personne n'a plus de 50%.<br/>
                        on élimine le perdant, <img [src]="candidatesDisplayService.getIconImage(step.selectedCandidate)" />.<br/>
                        tour suivant&nbsp;!
                    }
                    @default {
                        <b [style.color]="'red'">TRANSLATION FOR {{lang}} MISSING</b>
                    }
                }
            }
        </p>
    }
</span>

<p>
    @switch (lang) {
        @case ("en-CA") {
            <b [style.color]="winnerColor()">{{winnerName().toLocaleUpperCase(lang)}}</b> WINS
        }
        @case ("fr-FR") {
            <b [style.color]="winnerColor()">{{winnerName().toLocaleUpperCase(lang)}}</b> A GAGNÉ
        }
        @default {
            <b [style.color]="'red'">TRANSLATION FOR {{lang}} MISSING</b>
        }
    }
</p>
